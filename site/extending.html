<html>
	<head>
		<link href="gnome15.css" rel="stylesheet" type="text/css">
		<title>Gnome15 - Gnome integration for the Logitech G Keyboards - Extending</title>
	</head>
	<body>
		<div id="header">
			<img src="header.png"/>
		</div>
		<div id="toolbar">
			<ul>
				<li><a href="index.html">Home</a></li>
				<li>|</li>
				<li><a href="downloads.html">Downloads</a></li>
				<li>|</li>
				<li>[Help And Documentation]</li>
				<li>|</li>
				<li><a href="subprojects.html">Sub-projects</a></li>
				<li>|</li>
				<li><a href="https://launchpad.net/gnome15">Project</a></li>
			</ul>
		</div>
		<div id="subtoolbar">
			<ul>
				<li><a href="docs.html">Summary</a></li>
				<li>|</li>
				<li><a href="install.html">Installation</a></li>
				<li>|</li>
				<li>[FAQ]</li>
				<li>|</li>
				<li><a href="plugins.html">Plugin Gallery</a></li>
				<li>|</li>
				<li><a href="extending.html">[Plugin Tutorial]</a></li>
				<li>|</li>
				<li><a href="dbus.html">DBUS API</a></li>
			</ul>
		</div>
		
		<div class="clear"></div>
		<h1>Extending Gnome15</h1>			
		<p>The intention is to make Gnome15 as easy to extend as possible. The API is in its
		infancy at the moment, but it is already rich enough to support many plugins for two quite
		different devices.</p>
		<p>This page will walk you through the <i>Clock</i> example to give you a good idea of
		how all the pieces fit together.</p>
		<p>You should have at least reasonable knowledge of Python to create the plugin. Skills in SVG/XML are a help
		although all screen designing may be done using <a href="http://inkscape.org/">Inkscape</a> which is pretty easy to pick up the basics.</p>
		<p><i>The full example source is provided <a href="clock.zip">here</a>. You can extract the .glade used in this 
		example for the preferences UI, but I would recommend you follow this tutorial in full for all the other
		files that must be created.</i></p> 
		<h2>The Plugin</h2>
		<p>Most of Gnome15 is made up of <i>Plugins</i>. In general, a plugin will retrieve a piece
		of information from somewhere (such as CPU activity), and render it on to the LCD. The
		rendering is usually done using SVG <i>Themes</i>. Some plugins might not display anything
		until some event occurs, or they may be permanent. 
		<h3>How Gnome15 Locates Plugins</h3>
		<p>Plugins are looked for in a two default locations. Firstly, in the current user's HOME directory,
		under <b>.gnome15/plugins</b>. Secondly, in a global location.  To find out what directory global plugins
		are installed, you may run the following Python script :-
		<pre>$ python
Python 2.6.6 (r266:84292, Sep 15 2010, 16:22:56) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import gnome15.g15_globals as g
>>> print g.plugin_dir
/usr/share/gnome15/plugins
>>></pre>
		<p>Now you know the location of the global plugins, you should temporarily move the pre-installed clock plugin
		out of the way.<p>
		<pre>sudo mv /usr/share/gnome15/plugins/clock /usr/share/gnome15/old_clock_plugin</pre>
		<p>You can also specify a list of directories to search for plugins by setting the environment
		variable <i>G15_PLUGINS</i> before running the various tools. This is useful when working on the Gnome15 source.</p>
		<pre>G15_PLUGINS=$HOME/my_plugins g15-indicator</pre>
		<h3>The Plugin Layout</h3>
		<p>A plugin's files should be laid out in a particular way :-</p>
		<img src="plugin-layout.png"/>
		<ul>
			<li>The root folder name of the plugin must be the same as its <i>Id</i></li>
			<li>The plugin itself has the same name as the folder it is in suffixed with with .py</li>
			<li>Any ancilliary files a plugin may require should be stored in the root as well. Things such 
			as common images, .glade files for the configuration user interface etc.</li>
			<li>Themes are contained in sub-directories. Every plugin that uses themes must provide a <i>default</i> theme.</li>
			<li>Each theme can contain layouts for multiple models, and variants</li>
			<li>Variants are used when different layouts may be required depending on configuration. In the clock example,
			this is used to display a different clock if <i>Display Date</i> is not selected.</li>
			<li>All plugins should make best efforts to provide theme layouts for both the G19 and the G15. All G19 theme files should
			be prefixed with <i>g19-</i>. For the G15 use <i>default-</i> (when the G13 and G15v2 is supported, they have the same screen
			resolution, so no additional themes will be required).</li>
			<li>Although not used in this example, each theme may provide additional python code for a particular model / variant.
			This is used when manipulation is not possible (or difficult), just using SVG.</li>
		</ul>
		<h3>Where To Start</h3>
		<p>First off, create a directory layout similar to that above. I would recommended leaving the 'default' theme
		folder for now, and start by writing the plugin implementation. I will also assume you are going to follow
		the tutortial <i>exactly</i>, to recreate the 'Clock' plugin.</p>
		<p>Create a directory to use as a workspace. Give it a name equal to what you will be using for the plugin's Id.
		Then open up a text editor and create a file called <i>clock.py</i></p>
		<pre>mkdir ~/Desktop/clock
cd ~/Desktop/clock
gedit clock.py
</pre>
		<p>Now in your text editor, provide the python header line and the imports for the python classes we will be using :-</p>
		<pre>#!/usr/bin/env python
 
import gnome15.g15_screen as g15screen 
import gnome15.g15_theme as g15theme 
import gnome15.g15_util as g15util
import datetime
import os
import sys</pre>
		</pre> 
		<h3>Plugin Information</h3>
		<p>All plugins must supply some basic variables. By convention, these should be placed near the top of the python file,
		just after any imports.</p>
		<pre># Plugin information
id="clock"
name="Clock"
description="Just displays a simple clock. This is the plugin used in " \
    + " the tutorial at the Gnome15 site."
author="Joe B. &lt;joe@localhost&gt;"
copyright="Copyright (C)2010 Joe B."
site="http://localhost"
has_preferences=True</pre> 
		<h3>Plugin Preferences</h3>
		<img align="right" src="glade.png" height="287" width="389"/>
		<p>It is quite possible you want to expose some preferences in your plugin. In the Clock example
		you need two options, "Show Seconds" and "Show Date". You could create your preferences Window
		completely in Python using PyGTK, but it is recommended you design the window in <a href="http://glade.gnome.org/">Glade</a>.
		Your Glade file should exist at the root of your plugin, by convention named the same as your plugin Id with a
		.glade suffix.
		<p>If the plugin you wish to write has no preferences, set <b>has_preferences</b> to <b>False</b> and you
		can skip to the <i>Plugin Lifecycle</i> section.</p>
		<p>I will not describe how to create this Glade file. For the purposes of this example, you can either
		try your hand at Glade to produce a dialog that looks like the one in the image on the right, or you
		can extract <b>clock.glade</b> from the example <a href="clock.zip">source archive</a>.
		<p>Once you have Glade file, the <b>show_preferences</b> module function must be added. Insert this just after the plugin information
		described above. You should also ensure <b>has_preferences</b> is set to <i>True</i> in the plugin information.</p>
		<pre>def show_preferences(parent, gconf_client, gconf_key):
    widget_tree = gtk.Builder()
    widget_tree.add_from_file(os.path.join(os.path.dirname(__file__), "clock.glade"))
    
    dialog = widget_tree.get_object("ClockDialog")
    dialog.set_transient_for(parent)
    
    display_seconds = widget_tree.get_object("DisplaySecondsCheckbox")
    display_seconds.set_active(gconf_client.get_bool(gconf_key + "/display_seconds"))
    display_seconds.connect("toggled", changed, gconf_key + "/display_seconds", gconf_client)
    
    display_date = widget_tree.get_object("DisplayDateCheckbox")
    display_date.set_active(gconf_client.get_bool(gconf_key + "/display_date"))
    display_date.connect("toggled", changed, gconf_key + "/display_date", gconf_client)
    
    dialog.run()
    dialog.hide()

def changed(widget, key, gconf_client):
    gconf_client.set_bool(key, widget.get_active())
		</pre>
		<p>Gnome15 will call the <b>show_preferences</b> function when the user clicks on <i>Preferences</i>
		for this plugin in the configuration tool.</p>
		<p><i>Note, the show_preferences function may be called either from the g15-applet process, or the
		separate g15-config command. For this reason, you have no access to the active instance of the 
		plugin. During show_preferences, you should only ever write configuration. The plugin instance itself
		will have to monitor this configuration and react accordingly (more on this later).</i></p>  
		<h3>Plugin Lifecycle</h3>
		<p>You now need to provide a function that will create a plugin instance. This is called once when Gnome15
		applet starts. Add the <b>create</b> module function :-
		<pre>def create(gconf_key, gconf_client, screen):
    return G15Clock(gconf_key, gconf_client, screen)
		</pre>
		<p>Now you start implementing the plugin class <b>G15Clock</b>. The <b>activate</b> and deactivate</b> functions <u>must</u>
		be provided. These will be called either when Gnome15 starts and stops, or when the plugin is enabled or
		disabled by the user in the configuration tool.</p>
		<pre>class G15Clock():
    
    ''' 
    ******************************************************************
    * Lifecycle functions. You must provide activate and deactivate, *
    * the constructor and destroy function are optional              *
    ******************************************************************
    '''
    
    def __init__(self, gconf_key, gconf_client, screen):
        self.screen = screen
        self.hidden = False
        self.gconf_client = gconf_client
        self.gconf_key = gconf_key
        
        '''
        Most plugins will delegate their drawing to a 'Theme'. A theme usually consists of an SVG file, one
        for each model that is supported, and optionally a fragement of Python for anything that can't
        be done with the SVG
        '''
        self.reload_theme()
    
    def activate(self):
        self.timer = None
        
        '''
        The activate function is invoked when gnome15 starts up, or the plugin is re-enabled
        after it has been disabled
        '''
        
        
        '''
        Most plugins will usually want to draw on the screen. To do so, a 'page' is created. You also supply a callback here to
        perform the painting. You can also supply 'on_shown' and 'on_hidden' callbacks here to be notified when your
        page actually gets shown and hidden
        '''        
        self.page = self.screen.new_page(self.paint, id="Clock")
        
        ''' 
        Once created, you should always ask for the screen to be drawn (even if another higher
        priority screen is actually active. If the canvas is not displayed immediately,
        the on_shown function will be invoked when it finally is.         
        '''
        self.screen.redraw(self.page)
        
        '''
        Schedule another redraw if appropriate
        '''        
        self.schedule_redraw()
        
        '''
        You want to be notified when the plugin configuration changed, so watch for gconf events
        '''        
        self.notify_handle = self.gconf_client.notify_add(self.gconf_key, self.config_changed);
    
    def deactivate(self):
        
        '''
        Stop being notified about configuration changes
        '''        
        self.gconf_client.notify_remove(self.notify_handle);
        
        '''
        Stop updating
        '''
        if self.timer != None:
            self.timer.cancel()
            self.timer = None
        
        ''' 
        Deactivation occurs when either the plugin is disabled, or the applet is stopped
        On deactivate, you must remove your canvas.  
        '''        
        self.screen.del_page(self.page)
        
    def destroy(self):
        '''
        Invoked when the plugin is disabled or the applet is stopped
        '''
        pass
		</pre>
		
		<h3>Handling Configuration Changes</h3>
		
		<p>As mentioned earlier in <i>Preferences</i> description, your plugin should handle any appropriate
		configuration changes (if it has options), and react immediately if possible. You have already
		requested gconf notify us when changes occur, but you now need to add the callback function that 
		handles this event :-</p>
		
		<pre>def config_changed(self, client, connection_id, entry, args):
        '''
        This is called when the gconf configuration changes. See add_notify and remove_notify in
        the plugin's activate and deactive functions.
        '''
        
        '''
        Reload the theme as the layout required may have changed (i.e. with the 'show date' 
        option has been change)
        '''
        self.reload_theme()
        
        '''
        In this case, you temporarily raise the priority of the page. This will force
        the page to be painted (i.e. the paint function invoked). After the specified time,
        the page will revert it's priority. Only one revert timer is active at any one time,
        so it is safe to call this function in quick succession  
        '''
        self.screen.set_priority(self.page, g15screen.PRI_HIGH, revert_after = 3.0)
		</pre>
		
		<h3>Drawing The Page</h3>
		
		<p>An explanation of <i>Pages</i> is now required. To be able to draw on the LCD, the plugin must
		reserve a <i>Page</i> for itself. This is done through the <i>screen</i> object that has been passed
		to the plugin instance through the <b>create</b> module function. For screens that want to be permanently
		displayed, you would usually do this in the activate function (see above code).</p>
		
		<p>Once you have the page object, you can use this to do things such as removing the page, changing it's
		priority, cycling to it etc.</p>
		
		<p>Creation of a page also requires that you provide a callback function that will do the actual drawing
		of the plugin's screen. In this function, you can do one of two things :-</p>
		<ol>
			<li>Perform all of your drawing in Python code. Gnome15 uses the <a href="http://cairographics.org/">Cairo</a> API to do all of its drawing, and
			the paint function is called with a 'canvas' argument that is an instance of the <i>cairo.Context</i> object (see <a href="http://cairographics.org/documentation/pycairo/2/reference/context.html#class-context">here</a>
			for more information). You can do a lot with Cairo directly, and further explanation is way beyond the scope of this tutorial. 
			</li>
			<li>Delegate the drawing to a <i>Theme</i>. This usually means no python is required, just an SVG file. This is the route
			this example Clock plugin takes.</li>
		</ol>
		 
		<p>Now, add the the following code to the G15Clock class. </p>
		<pre>def reload_theme(self):        
        variant = None
        if self.gconf_client.get_bool(self.gconf_key + "/display_date"):
            variant = "with-date"
        self.theme = g15theme.G15Theme(os.path.join(os.path.dirname(__file__), "default"), self.screen, variant)
        
def paint(self, canvas):
        '''
        Invoked when this plugins page is active and needs to be redrawn. You should NOT
        call this function yourself, it is called automatically by the screen manager. 
        The function should draw everything as quickly as possible (i.e. not go off to 
        the internet to gather data or anything like that!)        
        '''
        
        properties = { }
        
        '''
        Get the details to display and place them as properties which are passed to
        the theme
        '''
        time_format = "%H:%M"
        if self.gconf_client.get_bool(self.gconf_key + "/display_seconds"):
            time_format = "%H:%M:%S"
        properties["time"] = datetime.datetime.now().strftime(time_format)
            
        if self.gconf_client.get_bool(self.gconf_key + "/display_date"):
            properties["date"] = datetime.datetime.now().strftime("%d/%m/%Y")
            
        '''
        Now ask the theme to draw the screen
        '''
        self.theme.draw(canvas, properties)
		</pre>
		
		<p>This is the usual pattern for your theme enabled paint function. A dictionary
		object must be created and populated with the values that you wish to display
		on the screen in some fashion.</p>
		<p>In this case, you create two properties. <b>time</b> contains the current time,
		and <b>date</b> contains the current date.  
		<p>The final thing your paint function should do is call the <b>draw</b> function
		of the theme object, passing it the properties you have built up.</p>
		
		<h3>Scheduling A Redraw</h3>
		<p>The final task in the Python file is write the code to redraw the screen at a fixed
		interval. As you are writing a clock, this redraw might need to happen once every second
		(if your 'Show Seconds' option is on), or you may only need to redraw every minute.</p>
		<p>A plugin should make best efforts to only redraw when it needs to, particulary if
		the theme is complex.</p>
		<pre>def redraw(self):
        '''
        Invoked by the timer once a second to redraw the screen. If your page is currently activem
        then the paint() functions will now get called. When done, you want to schedule the next
        redraw
        '''
        self.screen.redraw(self.page) 
        self.schedule_redraw()
        
def schedule_redraw(self):
        '''
        Determine when to schedule the next redraw for. 
        '''        
        now = datetime.datetime.now()
        display_seconds = self.gconf_client.get_bool(self.gconf_key + "/display_seconds")
        if display_seconds:
            next_tick = now + datetime.timedelta(0, 1.0)
            next_tick = datetime.datetime(next_tick.year,next_tick.month,
            	next_tick.day,next_tick.hour, next_tick.minute, int(next_tick.second))
        else:
            next_tick = now + datetime.timedelta(0, 60.0)
            next_tick = datetime.datetime(next_tick.year,next_tick.month,
            	next_tick.day,next_tick.hour, next_tick.minute, 0)
        delay = g15util.total_seconds( next_tick - now )
        
        '''
        Try not to create threads or timers if possible. Use g15util.schedule() instead
        '''
        self.timer = g15util.schedule("ClockRedraw", delay, self.redraw)</pre>
		<p>Notice the comment about threads and timers. Using g15util.schedule means all redrawing across all
		plugins happen on a single thread, so unless your redraw is going to take a long time, you should avoid
		creating your own thread.</p>	
		<h2>The Theme</h2>
		<p>Now you are ready to create the SVG file for the theme. While you can of course create this by hand,
		it is recommended you use an SVG editor such as Inkscape to do this.</p>
		<p>First, create the <b>default</b> theme directory in the plugin workspace, <i>cd</i> into it and start Inkscape :-</p>
		<pre>cd ~/Desktop/clock
mkdir default
cd default
inkscape</pre> 
		<h3>Document Sizes And Alignment</h3>
		
		<p>You will be creating a total of 4 SVG files, two for the G15 (and other monochrome models when supported), and two
		for the G19. Each model has two SVG files because there are two <i>Variants</i> (one for when displaying the date,
		and one for when just the time is displayed). Most plugins do not actually have variants, and the Clock example could
		in fact be implemented without them, but they are included to demonstrate the feature.</p> 
		
		We will start with the <b>default.svg</b> file used for the G15.</p>
		
		<p>Open up the <i>Document Properties</i> dialog (Shift+Ctrl+D) and set a <i>Custom Size</i> of <b>160px</b> by <b>43px</b>. These
		are the exact dimensions of the LCD for the keyboard model.</p>
		
		<p>When drawing shaps and text, you should also try to only use integer numbers for locations and sizes where possible.
		For example, drawing a box at <b>x=54.2343323, y=12.1213</b> is NOT recommended. Instead, you should use <b>x=54, y=12</b>.
		This is not so important for G19 theme files, but failing to observe this in the default themes could mean you
		get "rough" edges on the G15.</p>
		 
		<h3>Property Replacement</h3>
		<img align="left" src="inkscape-adding-text.png" width="399" height="342"/>
		<p>The most used feature of themes is <i>Property Replacement</i>. Gnome15 will replace any occurences of 
		the variable names it finds in the SVG with the value stored in the <i>Properties</i> dictionary created in
		<b>paint</b> function of the plugin class.</p>
		<p>In Inkscape, simply select the Text tool, click where you want to place the text and type the variable name
		pattern in the format <b>${NAME}</b>. At this point, you should also set the font size and justification.</p>
		<p>For the clock example, you should add a new text field that has a value of <b>${time}</b> as per the image to the left.</p>
		<div style="clear: both"></div>
		<i>A note about Fonts. While for the G19 you can use any font family, size or style, for the G15 you <u>MUST</u>
		use fixed size bitmap fonts (the default family is 'Fixed'). The problem is, Inkscape doesn't seem to handle these
		very well, so you may set the font family to <b>Sans</b>, and Gnome15 will automatically replace the font name
		when it loads a theme file for the G15.</i>. 
		
		<h3>Default Fill Colour</h3>
		<p>In order to allow the <i>Background Colour</i> and <i>Foreground Colour</i> controls to work, a theme
		file should try to avoid using specific colours for the <i>Fill</i> colour. Instead, the element should
		be set to Inherit.</p>
		<ol>
			<li>Select the required element using the selection tool.</li>
			<li>Press <i>Ctrl+Shift+F</i>. This will display the <i>Fill And Stroke</i> properties dialog. </li> 
			<li>Make sure the <i>Fill</i> tab is selected.</li>
			<li>Click on the <b>?</b> button. This will Unset the paint, and make it use the document's default colour.</li>
		</ol> 
		<p>Once you have done this, save the SVG file with a name of <b>default.svg</b>.
		<h3>Create SVG files for the other variants and models</h3>
		<p>You now need to repeat the above steps for each of the variants and models. When complete you will have
		4 files :-</p>
		<ul>
			<li>default.svg - For the G15 and others, no date displayed</li>
			<li>default-with-date.svg - For the G15 and others, date displayed</li>
			<li>g19.svg - For the G19, no date displayed</li>
			<li>g19-with-date.svg - For the G19, date displayed</li>
		</ul>
		<p><i>The SVG files for the G19 must have a different document size, this time <b>320</b>x<b>240</b></i></p>
		<table>
			<tr>
				<td>
					<img src="clock1.png"/>
				</td>
				<td>
					<img src="clock2.png"/>
				</td>
				<td>
					<img src="clock3.png"/>
				</td>
				<td>
					<img src="clock4.png"/>
				</td>
			</tr>
			<tr>
				<td align="center">default.svg</td>
				<td align="center">default-with-date.svg</td>
				<td align="center">g19.svg</td>
				<td align="center">g19-with-date.svg</td>
			</tr>
		</table>
		<h2>Installing The Plugin</h2>
		<p>You are now ready to install the plugin and try it out! If you haven't already, move the pre-installed Clock
		plugin out of the way (see the instructions in the <i>How Gnome15 Locates Plugins</i> section).</p>
		<p>For now, install the plugin into the user specific plugins directory. This will be <b>$HOME/.gnome15/plugins</b>. You 
		may have to create this directory.</p>
		<pre>mkdir -p $HOME/.gnome15/plugins
mv ~/Desktop/clock $HOME/.gnome15/plugins			
		</pre>
		<p>Now remove the applet from your panel, wait a few seconds for it to completely shutdown, then 
		add it back again. You should now be able to go into <i>Preferences -> Plugins</i> and enabled your
		new plugin.</p>
		<h2>Other Theme Features</h2>
		<p>Here is a quick run-down of other theme features that are not used by the Clock example.</p>
		
		  
		<h3>Text Shadows</h3>
		
		<p>Due to the nature of the G15's LCD display, if your text overlaps another element, such as an image or
		other text, the two elements will merge together and become unreadable. To avoid this you can mark text with
		the <b>shadow</b> style.</p>
		<ol>
			<li>Select the required element using the selection tool.</li>
			<li>Press <i>Ctrl+Shift+Z</i>. This will display the <i>XML Editor</i> properties dialog. </li> 
			<li>Add a new attribute with the name <b>class</b>, give it value of <b>shadow</b> and click <b>Set</b>.</li>
		</ol>
		<p><i>Internally, when Gnome15 loads the theme, it will make 8 copies of the element, colour them the same 
		colour as the background, and place them underneath the original element at offsets x-1/y-1, x/y-1, x+1/y-1,
		x-1/y, x+1/y, x-1/y+1, x/y+1 and x+1/y+1. The end effect is you end up with a 1 pixel white border around all
		of the text.</i></p>
		<h3>Text Boxes</h3>
		<p>Unfortunately, <i>rsvg</i>, which is used to render the SVG, does not support the <b>&lt;flowRoot&gt;</b> tag. This tag is
		used when you want text to wrap within a defined shape. Within the context of Gnome15, this would be particularly 
		useful for when the size of any replaced text varies wildly (such as Notification messages). However, rsvg just
		renderes them as big black boxes!</p>
		<p>To work around this, the concept of <i>Text Boxes</i> has been introduced. The clock example does not use
		these, but I will describe them here now.</p>
		<p>Basically, you draw two objects in Inkscape. The first being a rectangle that defines the area you
		want the text to occupy (and give it a class attribute of <b>textbox</b>), the second being the text itself. 
		You then link them together using their Id. The rectangle object should be given an Id equal to the property
		name of the text it will contain, and the text object should have the same Id, but suffixed with <b>_text.</b>
		<p>Look at the source for the <i>Notify</i> SVG files for an example.</p> 
		
		<h3>Hiding Elements</h3>
		<p>Another frequently used feature is hiding objects depending on whether a property is set. For example,
		the <i>Media Player</i> plugin displays a Paused image when the media player is in that state.</p>
		<ol>
			<li>Select the required element using the selection tool.</li>
			<li>Press <i>Ctrl+Shift+Z</i>. This will display the <i>XML Editor</i> properties dialog. </li> 
			<li>Add a new attribute with the name <b>title</b>, give it value of <b>del !PROPERTY_NAME</b> or <b>del PROPERTY_NAME</b> and click <b>Set</b> (if 
			the property name is prefixed with an exclamation mark, then it will be removed if it does NOT exist, otherwise 
			it will be removed if it DOES exist).</li>
		</ol>
		<h3>Progress Bars</h3>
		<p>The final special theme feature provided is handling of progress bar. Such objects will have their
		<b>width</b> attribute altered based on the <b>percentage</b> value provided by a property. </p><ol>
			<li>Draw your progress bar somewhere on the canvas as the size it would be if it was "full".</li>
			<li>Select the required element using the selection tool.</li>
			<li>Press <i>Ctrl+Shift+Z</i>. This will display the <i>XML Editor</i> properties dialog. </li> 
			<li>Add a new attribute with the name <b>class</b>, give it value of <b>progress_bar</b>.</li> 
			<li>Select the <b>id</b> attribute and change its value to be equal to the property name suffixed with <b>_progress</b>.</li>
		</ol>
		<h3>Advanced Themes - Using Python</h3>
		<p>If you want to manipulate the theme in a way that is not possible using just standard SVG and the features
		above, you may provide a python class along with any SVG file. This can contain functions that manipulate the 
		SVG document, or paint directly using Cairo. This feature is currently used by the <i>Calendar</i> plugin
		and the <i>RSS</i> plugin, so look at the source for those for examples for now.</p>
	</body>
</html>